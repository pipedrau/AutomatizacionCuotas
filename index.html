<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Access-Control-Allow-Origin" content="*">
    <meta http-equiv="Cross-Origin-Opener-Policy" content="same-origin">
    <meta http-equiv="Cross-Origin-Embedder-Policy" content="require-corp">
    <title>Automatización Cuotas Hondubet</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dom-to-image/2.6.0/dom-to-image.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dom-to-image-more@2.9.5/dist/dom-to-image-more.min.js"></script>
    <link rel="preload" href="LogoHondubet.png" as="image" crossorigin="anonymous">
    <link rel="preload" href="logosliga/Premier.webp" as="image" crossorigin="anonymous">
    <link rel="preload" href="logosliga/Laliga.webp" as="image" crossorigin="anonymous">
    <link rel="preload" href="logosliga/ChampionsLeague.webp" as="image" crossorigin="anonymous">
</head>
<body>
    <div class="container">
        <!-- Panel de control fuera del canvas -->
        <div class="control-panel">
            <h2>Panel de Control</h2>
            
            <div class="control-group formato-group">
                <label for="formato-selector">Seleccionar Formato:</label>
                <select id="formato-selector">
                    <option value="1">1 Enfrentamiento</option>
                    <option value="2">2 Enfrentamientos</option>
                    <option value="3">3 Enfrentamientos</option>
                </select>
            </div>
            
            <!-- Pestañas para seleccionar el evento a configurar (solo visible en formatos 2 y 3) -->
            <div class="control-group evento-tabs" style="display: none;">
                <div class="tabs">
                    <button class="tab-btn active" data-evento="1">Evento 1</button>
                    <button class="tab-btn" data-evento="2">Evento 2</button>
                    <button class="tab-btn" data-evento="3">Evento 3</button>
                </div>
            </div>
            
            <div class="control-group">
                <label>Fondo:</label>
                <button id="cambiar-fondo">Cambiar Fondo Aleatorio</button>
            </div>
            
            <div class="control-group">
                <label for="liga-selector">Seleccionar Torneo:</label>
                <select id="liga-selector">
                    <option value="">Seleccionar...</option>
                    <!-- Opciones se cargarán dinámicamente con JavaScript -->
                </select>
                <div class="checkbox-container">
                    <input type="checkbox" id="logo-blanco-checkbox" checked>
                    <label for="logo-blanco-checkbox">Logo en blanco</label>
                </div>
            </div>
            
            <div class="control-group">
                <label for="escudo1-selector">Escudo Local:</label>
                <select id="escudo1-selector" class="evento-1-control">
                    <option value="">Seleccionar...</option>
                    <!-- Opciones se cargarán dinámicamente con JavaScript -->
                </select>
                <select id="escudo1-selector-2" class="evento-2-control" style="display: none;">
                    <option value="">Seleccionar...</option>
                    <!-- Opciones se cargarán dinámicamente con JavaScript -->
                </select>
            </div>
            
            <div class="control-group">
                <label for="escudo2-selector">Escudo Visitante:</label>
                <select id="escudo2-selector" class="evento-1-control">
                    <option value="">Seleccionar...</option>
                    <!-- Opciones se cargarán dinámicamente con JavaScript -->
                </select>
                <select id="escudo2-selector-2" class="evento-2-control" style="display: none;">
                    <option value="">Seleccionar...</option>
                    <!-- Opciones se cargarán dinámicamente con JavaScript -->
                </select>
            </div>
            
            <div class="control-group">
                <label for="escudo1-selector-3">Escudo Local:</label>
                <select id="escudo1-selector-3" class="evento-3-control" style="display: none;">
                    <option value="">Seleccionar...</option>
                    <!-- Opciones se cargarán dinámicamente con JavaScript -->
                </select>
            </div>
            
            <div class="control-group">
                <label for="escudo2-selector-3">Escudo Visitante:</label>
                <select id="escudo2-selector-3" class="evento-3-control" style="display: none;">
                    <option value="">Seleccionar...</option>
                    <!-- Opciones se cargarán dinámicamente con JavaScript -->
                </select>
            </div>
            
            <div class="control-group cuotas-group">
                <label>Cuotas:</label>
                <div class="cuotas-inputs evento-1-control">
                    <div class="cuota-input">
                        <label for="cuota-local">Local:</label>
                        <input type="number" id="cuota-local" step="0.05" min="1" value="1.95">
                    </div>
                    <div class="cuota-input">
                        <label for="cuota-empate">Empate:</label>
                        <input type="number" id="cuota-empate" step="0.05" min="1" value="3.25">
                    </div>
                    <div class="cuota-input">
                        <label for="cuota-visitante">Visitante:</label>
                        <input type="number" id="cuota-visitante" step="0.05" min="1" value="3.65">
                    </div>
                </div>
                <div class="cuotas-inputs evento-2-control" style="display: none;">
                    <div class="cuota-input">
                        <label for="cuota-local-2">Local:</label>
                        <input type="number" id="cuota-local-2" step="0.05" min="1" value="1.95">
                    </div>
                    <div class="cuota-input">
                        <label for="cuota-empate-2">Empate:</label>
                        <input type="number" id="cuota-empate-2" step="0.05" min="1" value="3.25">
                    </div>
                    <div class="cuota-input">
                        <label for="cuota-visitante-2">Visitante:</label>
                        <input type="number" id="cuota-visitante-2" step="0.05" min="1" value="3.65">
                    </div>
                </div>
                <div class="cuotas-inputs evento-3-control" style="display: none;">
                    <div class="cuota-input">
                        <label for="cuota-local-3">Local:</label>
                        <input type="number" id="cuota-local-3" step="0.05" min="1" value="1.95">
                    </div>
                    <div class="cuota-input">
                        <label for="cuota-empate-3">Empate:</label>
                        <input type="number" id="cuota-empate-3" step="0.05" min="1" value="3.25">
                    </div>
                    <div class="cuota-input">
                        <label for="cuota-visitante-3">Visitante:</label>
                        <input type="number" id="cuota-visitante-3" step="0.05" min="1" value="3.65">
                    </div>
                </div>
            </div>
            
            <div class="control-group hora-group">
                <label for="hora-partido">Hora del Partido:</label>
                <input type="time" id="hora-partido-input" class="evento-1-control" value="18:30">
                <input type="time" id="hora-partido-input-2" class="evento-2-control" style="display: none;" value="20:45">
                <input type="time" id="hora-partido-input-3" class="evento-3-control" style="display: none;" value="16:00">
            </div>
            
            <!-- Control para seleccionar la fecha -->
            <div class="control-group">
                <label for="fecha-selector">Fecha:</label>
                <div class="fecha-control-container">
                    <input type="date" id="fecha-selector" class="input-control">
                    <button id="reset-fecha-btn" class="small-btn">Hoy</button>
                </div>
            </div>
            
            <div class="control-actions">
                <button id="generar-btn">Generar Imagen</button>
                <button id="descargar-btn">Descargar Imagen</button>
            </div>
            
            <div class="instrucciones">
                <h3>Instrucciones:</h3>
                <ol>
                    <li>Selecciona el formato según el número de enfrentamientos</li>
                    <li>Selecciona un fondo o usa el aleatorio</li>
                    <li>Elige el torneo que deseas mostrar</li>
                    <li>Selecciona los escudos de los equipos</li>
                    <li>Ajusta las cuotas si es necesario</li>
                    <li>Haz clic en "Generar Imagen" para previsualizar</li>
                    <li>Descarga la imagen cuando esté lista</li>
                </ol>
            </div>
        </div>

        <!-- Canvas para la imagen a generar -->
        <div class="canvas-container">
            <div id="canvas" class="canvas">
                <!-- Fondo (se cargará aleatoriamente con JS) -->
                <div class="background-container"></div>
                
                <!-- Logo Hondubet -->
                <div class="hondubet-logo">
                    <img src="LogoHondubet.png" alt="Hondubet Logo">
                </div>
                
                <!-- Contenedor de Logo Liga -->
                <div class="liga-container">
                    <!-- Se cargará dinámicamente el logo de la liga -->
                </div>
                
                <!-- Contenedor de Fecha -->
                <div class="fecha-container">
                    <div class="dia"></div>
                    <div class="mes"></div>
                </div>
                
                <!-- Contenedores para los escudos (se añadirán en futuras implementaciones) -->
                <div class="escudos-container">
                    <div class="equipo equipo-local">
                        <div class="escudo-local"></div>
                    </div>
                    
                    <div class="equipo equipo-visitante">
                        <div class="escudo-visitante"></div>
                    </div>
                </div>
                
                <!-- Módulo de Evento 1 - Contiene la información del primer partido y cuotas -->
                <div class="evento-container evento-1">
                    <!-- Contenedor para la hora del partido -->
                    <div class="hora-partido-container">
                        <div class="hora-partido">18:30</div>
                    </div>

                    <!-- Banner del partido -->
                    <div class="match-banner-container">
                        <div class="match-banner">
                            <div class="team team-left nombre-equipo-banner local-banner">
                                <img class="mini-escudo mini-escudo-local" src="" alt="" style="display: none;">
                                <span class="nombre-equipo-texto">Local</span>
                            </div>
                            <div class="vs-container">
                                <div class="vs-triangle"></div>
                                <div class="vs-text">VS</div>
                            </div>
                            <div class="team team-right nombre-equipo-banner visitante-banner">
                                <span class="nombre-equipo-texto">Visitante</span>
                                <img class="mini-escudo mini-escudo-visitante" src="" alt="" style="display: none;">
                            </div>
                        </div>
                    </div>

                    <!-- Contenedor para las cuotas -->
                    <div class="cuotas-container">
                        <div class="texto-empate">EMPATE</div>
                        <div class="hora-empate">18:30</div>
                        <div class="cuota cuota-local">
                            <div class="valor-cuota">1.95</div>
                        </div>
                        <div class="cuota cuota-empate">
                            <div class="valor-cuota">3.25</div>
                        </div>
                        <div class="cuota cuota-visitante">
                            <div class="valor-cuota">3.65</div>
                        </div>
                    </div>
                </div>
                
                <!-- Módulo de Evento 2 - Contiene la información del segundo partido y cuotas -->
                <div class="evento-container evento-2" style="display: none;">
                    <!-- Contenedor para la hora del partido -->
                    <div class="hora-partido-container">
                        <div class="hora-partido">20:45</div>
                    </div>

                    <!-- Banner del partido -->
                    <div class="match-banner-container">
                        <div class="match-banner">
                            <div class="team team-left nombre-equipo-banner local-banner-2">
                                <img class="mini-escudo mini-escudo-local" src="" alt="" style="display: none;">
                                <span class="nombre-equipo-texto">Local</span>
                            </div>
                            <div class="vs-container">
                                <div class="vs-triangle"></div>
                                <div class="vs-text">VS</div>
                            </div>
                            <div class="team team-right nombre-equipo-banner visitante-banner-2">
                                <span class="nombre-equipo-texto">Visitante</span>
                                <img class="mini-escudo mini-escudo-visitante" src="" alt="" style="display: none;">
                            </div>
                        </div>
                    </div>

                    <!-- Contenedor para las cuotas -->
                    <div class="cuotas-container">
                        <div class="texto-empate">EMPATE</div>
                        <div class="hora-empate">20:45</div>
                        <div class="cuota cuota-local">
                            <div class="valor-cuota" id="valor-cuota-local-2">1.95</div>
                        </div>
                        <div class="cuota cuota-empate">
                            <div class="valor-cuota" id="valor-cuota-empate-2">3.25</div>
                        </div>
                        <div class="cuota cuota-visitante">
                            <div class="valor-cuota" id="valor-cuota-visitante-2">3.65</div>
                        </div>
                    </div>
                </div>
                
                <!-- Módulo de Evento 3 - Contiene la información del tercer partido y cuotas -->
                <div class="evento-container evento-3" style="display: none;">
                    <!-- Contenedor para la hora del partido -->
                    <div class="hora-partido-container">
                        <div class="hora-partido">16:00</div>
                    </div>

                    <!-- Banner del partido -->
                    <div class="match-banner-container">
                        <div class="match-banner">
                            <div class="team team-left nombre-equipo-banner local-banner-3">
                                <img class="mini-escudo mini-escudo-local" src="" alt="" style="display: none;">
                                <span class="nombre-equipo-texto">Local</span>
                            </div>
                            <div class="vs-container">
                                <div class="vs-triangle"></div>
                                <div class="vs-text">VS</div>
                            </div>
                            <div class="team team-right nombre-equipo-banner visitante-banner-3">
                                <span class="nombre-equipo-texto">Visitante</span>
                                <img class="mini-escudo mini-escudo-visitante" src="" alt="" style="display: none;">
                            </div>
                        </div>
                    </div>

                    <!-- Contenedor para las cuotas -->
                    <div class="cuotas-container">
                        <div class="texto-empate">EMPATE</div>
                        <div class="hora-empate">16:00</div>
                        <div class="cuota cuota-local">
                            <div class="valor-cuota" id="valor-cuota-local-3">1.95</div>
                        </div>
                        <div class="cuota cuota-empate">
                            <div class="valor-cuota" id="valor-cuota-empate-3">3.25</div>
                        </div>
                        <div class="cuota cuota-visitante">
                            <div class="valor-cuota" id="valor-cuota-visitante-3">3.65</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mensaje sobre el servidor -->
    <div id="cors-message" style="display: none; position: fixed; top: 10px; right: 10px; background: #ffeb3b; padding: 10px; border-radius: 5px; max-width: 350px; font-size: 14px; z-index: 9999; box-shadow: 0 2px 4px rgba(0,0,0,0.2);">
      <b>Recomendación:</b> Para evitar problemas con la generación de imágenes, ejecuta esta aplicación a través del servidor local incluido:
      <ol style="margin-top: 5px; margin-bottom: 5px; padding-left: 20px;">
        <li>Abre una terminal en esta carpeta</li>
        <li>Ejecuta: <code>npm install</code> (solo la primera vez)</li>
        <li>Ejecuta: <code>npm start</code></li>
        <li>Abre: <a href="http://localhost:3000" target="_blank">http://localhost:3000</a></li>
      </ol>
      <button onclick="this.parentNode.style.display='none'" style="background: #333; color: white; border: none; padding: 3px 8px; border-radius: 3px; cursor: pointer; float: right;">Cerrar</button>
      <div style="clear: both;"></div>
    </div>

    <script src="script.js"></script>
    <script>
      // Mostrar mensaje CORS si estamos en file://
      document.addEventListener('DOMContentLoaded', function() {
        // En GitHub, no mostrar este mensaje
        if (window.location.protocol === 'file:' && 
            window.location.href.indexOf('github.io') === -1 && 
            window.location.href.indexOf('github.com') === -1) {
          document.getElementById('cors-message').style.display = 'block';
        }
      });
    </script>
</body>
</html> 